<div x-show="$store.main.currentDropdown === 1" x-cloak class="flex flex-col w-full max-h-[calc(100vh-(var(--nav-height)))] overflow-y-scroll">
  <div class="flex w-full">
      {% for link in first_tab_menu.links %}
        {% assign index = forloop.index %}
          <div
            class="dropdown-panel-content flex flex-col items-start opacity-0 border-black"
            id="{{ link.title}}"
            role="menu"
            aria-labelledby="{{ link.title }}-dropdown"
            :style="$store.main.isNavOpen ? 'animation: fadeIn 200ms ease-in-out 150ms forwards' : 'animation: fadeOut 150ms ease-in-out forwards'"
          >
            <h6 class="utility-lg uppercase pb-4">{{ link.title }}</h6>
            <div class="flex gap-x-2.5 w-full pb-30">
              <div class="w-full flex flex-col justify-between min-h-fit">
                {% if index == 3 %}
                  <ul class="flex flex-wrap gap-2.5">
                    {%- for sub_link in link.links -%}
                      <li class="flex flex-col gap-y-1">
                        <a href="{{ sub_link.url }}" class="hover:-translate-y-0.5 transition-transform duration-200 ease">
                          {% capture color %}{{ sub_link.object.metafields.custom.color }}{% endcapture %}
                          <h3 style="{% if color == '#181613' %} background-color: #fff; border: 1px solid #181613; {% else %} background-color: {{ color }}; {% endif %} {% if color == '#000000' %} color: #fff; {% endif %}" class="utility-sm text-[11px] uppercase flex justify-center items-center px-2.5 rounded-2 w-fit h-[25px] {% if color == blank %}border border-black{{ color }}{% endif %}">{{ sub_link.title }} </h3>
                        </a>
                      </li>
                    {%- endfor -%}
                  </ul>
                {% elsif index == 4 %}
                  {% assign sub_link = link.links[0] %}
                  <a href="{{ sub_link.url }}" class="flex flex-col">
                    {% for sub_link in link.links %}
                      {% if sub_link.type == 'collection_link' %}
                        {% render 'image', 
                          image_desktop: sub_link.object.image,  
                          width_desktop: '2000x', 
                          width_mobile: '500x', 
                          ratio_desktop: '66%',
                          ratio_mobile: '66%',
                          lazy: true,
                          image_classes: 'rounded-4' 
                        %}
                      {% else %}
                        {% render 'image', 
                          image_desktop: sub_link.object.metafields.custom.image,  
                          width_desktop: '2000x', 
                          width_mobile: '500x', 
                          ratio_desktop: '66%',
                          ratio_mobile: '66%',
                          lazy: true,
                          image_classes: 'rounded-4' 
                        %}
                      {% endif %}
                      <p class="heading-md pt-[5px]">{{ sub_link.object.metafields.custom.image_caption }}</p>
                    {% endfor %}
                  </a>
                {% else %}
                  <ul class="flex flex-col pr-5">
                  {%- for sub_link in link.links -%}
                    <li class="flex flex-col gap-y-1">
                      <a href="{{ sub_link.url }}">
                        <h3 class="menu-link {% if index == 1 %}large{% endif %} pb-4">{{ sub_link.title }}</h3>
                      </a>
                    </li>
                  {%- endfor -%}
                </ul>
                {% endif %}
              </div> 
            </div>
          </div>
      {% endfor %}
      {% if section.settings.first_dropdown_tab_image %}
        <div x-show="$store.main.currentDropdown === 1" class="w-1/4 block pb-11">
          <a href="" class="group">
            <div
              class="flex items-start pt-[11px] px-[30px] opacity-0 overflow-hidden relative"
              :style="$store.main.isNavOpen ? 'animation: fadeIn 200ms ease-in-out 100ms forwards' : 'animation: fadeOut 100ms ease-in-out forwards'"
            >
              <div class="relative min-w-[225px]">
                {% render 'image',
                  image_desktop: section.settings.first_dropdown_tab_image,
                  width_desktop: '1000x',
                  width_mobile: '500x',
                  ratio_desktop: '143%',
                  ratio_mobile: '143%',
                  lazy: true,
                  image_classes: ''
                %}
              </div>
            </div>
          </a>
        </div>
      {% endif %}
    </div>
    <div class="flex flex-col w-full px-5">
      <div class="flex flex-col items-center w-full pb-10 border-t border-black">
        <div class="flex justify-between items-center gap-2 w-full border-b border-black py-5 px-[4px]">
          <h4 class="heading-md">{{ section.settings.first_dropdown_tab_cta_1_heading }}</h4>
          <a href="{{ section.settings.first_dropdown_tab_cta_1_link }}" class="link-underlined w-max">
            {{ section.settings.first_dropdown_tab_cta_1_text }}
          </a>
        </div>
        <div class="flex justify-between items-center gap-2 w-full border-b border-black py-5 px-[4px] mb-5">
          <h4 class="heading-md">{{ section.settings.first_dropdown_tab_cta_2_heading }}</h4>
          <a href="{{ section.settings.first_dropdown_tab_cta_2_link }}" class="link-underlined w-max">
            {{ section.settings.first_dropdown_tab_cta_2_text }}
          </a>
        </div>
        <button @click.prevent="$store.main.closeMenus()" class="mx-auto button__secondary grey">Close</button>
      </div>
    </div>
</div>