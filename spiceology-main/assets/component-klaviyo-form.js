!function(){"use strict";class e extends HTMLElement{constructor(){super(),this.form=this.querySelector("form"),this.emailInput=this.querySelector('input[name="email"]'),this.errorWrapper=this.querySelector(".email-error"),this.submit=this.querySelector('button[type="submit"]'),this.form.addEventListener("submit",this.onSubmit),this.emailInput.addEventListener("input",(()=>{this.form.classList.remove("error"),this.errorWrapper.classList.remove("hidden")}))}destroy=()=>{this.form.removeEventListener("submit",this.onSubmit)};onSubmit=async e=>{e.preventDefault();try{const e=await function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Object.assign({},s,{g:e,email:t}),i=Object.keys(r).reduce(((e,t)=>(e.append(t,r[t]),e)),new URLSearchParams);return fetch("https://manage.kmail-lists.com/ajax/subscriptions/subscribe",{method:"POST",headers:{"Access-Control-Allow-Headers":"*","Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:i}).then((e=>e.json()))}(KLAVIYO_LIST_ID,this.emailInput.value);if(!e.success)throw new Error(e.errors[0]);this.handleSuccess()}catch(e){this.handleError(e)}};handleSuccess=()=>{this.submit.classList.add("hidden"),this.submit.disabled=!0,this.emailInput.value="You're in! Check email for confirmation.",this.emailInput.disabled=!0,this.emailInput.classList.add("success"),this.form.disabled=!0};handleError=e=>{console.error(e),this.form.classList.add("error"),this.form.disabled=!1,this.errorWrapper.innerHTML=e}}customElements.get("klaviyo-form")||customElements.define("klaviyo-form",e)}();