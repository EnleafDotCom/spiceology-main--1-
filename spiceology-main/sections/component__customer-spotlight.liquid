<section x-data="{ fadeIn: false }" x-intersect.threshold.20="fadeIn = true" :class="fadeIn && 'animate-fade-in-500'" class="opacity-0 section-p-b {{ section.settings.padding_bottom }}">
    <div class="flex flex-col-reverse lg:grid lg:grid-cols-12 gap-5 w-full px-5">
        <div class="lg:col-span-5 flex flex-col items-start lg:p-10">
            <h6 class="utility-lg uppercase pb-[5px] lg:pb-2.5">{{ section.settings.eyebrow }}</h6>
            <h3 class="heading-md lg:heading-lg pb-5">{{ section.settings.customer_name }}</h3>
            <hr class="h-1">
            <div class="flex gap-5 utility-lg uppercase py-1.5">
                <span class="w-24">Seen on:</span> 
                <span class="text-[11px] normal-case">{{ section.settings.seen_on }}</span>
            </div>
            <hr>
            <div class="flex gap-5 utility-lg uppercase py-1.5">
                <span class="w-24">Restaurants:</span> 
                <span class="text-[11px] normal-case">{{ section.settings.restaurants }}</span>
            </div>
            <hr>
            <div class="flex gap-5 utility-lg uppercase py-1.5 pb-10 lg:pb-14">
                <span class="w-24">Accolades:</span>
                <span class="text-[11px] normal-case">{{ section.settings.accolades }}</span>
            </div>
            <a href="{{ section.settings.link }}" class="button__primary w-full lg:w-max">Read More</a>
        </div>
        <div class="lg:col-span-7 flex w-full">
          <div x-cloak class="flex w-full">
            <div
              x-data="
                {
                  play: false,
                  togglePlay() {
                    this.play = !this.play
                    this.$refs.video[this.play ? 'play' : 'pause']()
                  }
                }
              "
              class="relative w-full aspect-[1.58] bg-white-warm/90 rounded-4 overflow-hidden flex justify-center"
            >
              <video
                x-ref="video"
                class="absolute inset-0 h-full w-full object-cover rounded-5"
                x-on:ended="play = false"
              >   
                {% for source in section.settings.video.sources %}
                  <source
                    src="{{ source.url }}"
                    type="{{ source.mime_type }}"
                  >
                {% endfor %}
              
                Your browser does not support the video tag.
      
              </video>
              <button
                @click="togglePlay"
                class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 lg:top-unset lg:left-unset lg:top-auto lg:left-auto lg:transform-none lg:bottom-5 lg:right-5 bg-white px-5 h-10 flex items-center gap-2 w-max"
                x-show="!play"
              >
                <span>
                  <svg width="10" height="13" viewBox="0 0 10 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 6.5L0.249999 12.1292L0.25 0.870834L10 6.5Z" fill="#181613"/>
                  </svg>
                </span>
                <span>Play</span>
              </button>
              <button
                @click="togglePlay"
                class="absolute bottom-5 right-5 bg-white px-5 h-10 opacity-0 hover:opacity-100 transition-all duration-200"
                x-show="play"
              >
                Pause
              </button>
            </div>
        </div>
      </div>
    </div>
</section>

{% schema %}
   {
    "name": "Customer Spotlight",
    "settings": [
      {
        "type": "text",
        "id": "eyebrow",
        "label": "Eyebrow",
        "default": "Customer Spotlight"
      },
      {
        "type": "text",
        "id": "customer_name",
        "label": "Customer Name",
        "default": "Customer Name"
      },
      {
        "type": "text",
        "id": "seen_on",
        "label": "Seen On",
        "default": "Seen On"
      },
      {
        "type": "text",
        "id": "restaurants",
        "label": "Restaurants",
        "default": "Restaurants"
      },
      {
        "type": "text",
        "id": "accolades",
        "label": "Accolades",
        "default": "Accolades"
      },
      {
        "type": "url",
        "id": "link",
        "label": "Link"
      },
      {
        "type": "video",
        "id": "video",
        "label": "Video"
      },
      {
        "type": "select",
        "id": "padding_bottom",
        "label": "Padding Bottom",
        "default": "medium",
        "options": [
            {
                "value": "small",
                "label": "Small"
            },
            {
                "value": "medium",
                "label": "Medium"
            },
            {
                "value": "large",
                "label": "Large"
            }
        ]
      }
    ],
    "presets": [
      {
        "category": "Content",
        "name": "Customer Spotlight",
        "settings": {
          "eyebrow": "Customer Spotlight",
          "customer_name": "Customer Name",
          "seen_on": "Seen On",
          "restaurants": "Restaurants",
          "accolades": "Accolades",
          "padding_bottom": "medium"
        }
      }
    ],
    "enabled_on": {
      "templates": ["index", "page"]
    }
   }
{% endschema %}