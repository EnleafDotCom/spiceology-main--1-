<section x-data="{ fadeIn: false }" x-intersect.threshold.20="fadeIn = true" :class="fadeIn && 'animate-fade-in-500'" class="lg:px-20 px-2.5 lg:py-10 py-4 opacity-0">
  {% if section.settings.heading != blank %}
    <div class="lg:block hidden utility-lg mb-9 text-center">{{ section.settings.heading }}</div>
  {% endif %}
  <div class="rounded-6 lg:py-4 lg:px-5 grid grid-cols-11 bg-white lg:gap-5 gap-2.5">
    <div class="lg:col-span-7 col-span-full relative {% if section.settings.image_position == 'right' %} lg:order-2 {% endif %}">
      {% render 'image', 
        image_desktop: section.settings.image,  
        image_mobile: section.settings.image, 
        width_desktop: '1000x', 
        width_mobile: '500x',
        lazy: true,
        image_classes: 'rounded-6 w-full' 
      %}
      <div class="absolute lg:w-[360px] lg:p-5 p-4 flex flex-col lg:gap-12 gap-5 bg-white 
        {% if section.settings.image_position == 'left' %} lg:top-7 lg:-left-12 lg:bottom-auto {% endif %}
        {% if section.settings.image_position == 'right' %} lg:-right-13 lg:left-auto lg:bottom-10 {% endif %}
         bottom-4 left-4 right-4">
        <div class="lg:text-20 lg:leading-120 text-14 leading-110 font-kremlin -rotate-2">{{ section.settings.description }}</div>
        <div class="font-mono text-13 leading-140 tracking-2 uppercase">{{ section.settings.name | newline_to_br }}</div>
      </div>
    </div>
    <div class="lg:col-span-4 col-span-full lg:px-12 px-4 lg:py-0 py-5 my-auto {% if section.settings.image_position == 'right' %} lg:order-1 {% endif %}">
      {%- render 'product__card', product: section.settings.product -%}
    </div>
  </div>
</section>

{% schema %}
  {
    "name": "Product Split Image",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading"
      },
      {
        "type": "product",
        "id": "product",
        "label": "Product"
      },
      {
        "type": "image_picker",
        "id": "image",
        "label": "Image",
        "info": "Aspect: 1x1, Min Width: 2000px, File Type: JPG/PNG/GIF/MP4"
      },
      {
        "type": "select",
        "id": "image_position",
        "label": "Image Position",
        "options": [
          {
            "value": "left",
            "label": "Left"
          },
          {
            "value": "right",
            "label": "Right"
          }
        ]
      },
      {
        "type": "textarea",
        "id": "description",
        "label": "Description",
        "info": "Max Characters: 200"
      },
      {
        "type": "textarea",
        "id": "name",
        "label": "Name"
      }
    ],
    "presets": [
      {
        "name": "Product Split Image",
        "settings": {
          "heading": "Spiceologists share their gifting must-haves",
          "product": "achiote-blend",
          "image": "shopify:\/\/shop_images\/0e890d4cef0d8bfa4f7982ed56188266.jpg",
          "image_position": "left",
          "description": "These are Spiceology’s top sellers, aka the very best flavors, all very different, all chef-created.",
          "name": "– Jeanne R,\u2028Vice President of Marketing"
        }
      }
    ]
  }
{% endschema %}
